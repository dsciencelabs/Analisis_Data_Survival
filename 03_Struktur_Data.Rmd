# Struktur Data

Struktur data dalam R adalah cara di mana Anda dapat mengatur dan menyimpan data dalam bentuk yang terstruktur agar mudah diakses, dikelola, dan dimanipulasi. Struktur data memungkinkan Anda untuk mengelompokkan nilai-nilai data ke dalam objek yang sesuai dengan jenis dan sifat data yang Anda miliki. R memiliki beberapa jenis struktur data yang dapat digunakan untuk berbagai tujuan.

```{r struktur-data,echo=FALSE, fig.cap='Struktur Data dalam R', tidy=FALSE, out.width='100%', fig.align='center'}
library(knitr)
img1_path <- "./images/Bab3/Struktur_Data.png"
include_graphics(img1_path)
```

## Vektor

Elemen paling dasar dalam R adalah vektor, yang berisikan kumpulan elemen data dengan tipe yang sama. Terdapat dua jenis vector, yaitu vector numerik dan vector karakter. Misalnya:

```{r , echo=T, results='hide'}
vektor <- seq(from=10, to=21, by=1)      # fungsi `seq()` dengan "by"
vektor<- seq(from=10, to=21, len=12)     # fungsi `seq()` dengan "len"
vektor <- 10:21                          # tetapkan data dalam vektor 
vektor <- vektor+2                       # Operasi berdasarkan elemen
vektor <- vektor*2                       # Tambahkan 2 untuk setiap elemen 
vektor <- vektor^2                       # Pangkat 2 untuk setiap elemen 
vektor <- sqrt(vektor)                   # Akar kuadrat untuk setiap elemen
vektor <- log(vektor)                    # Logaritma untuk setiap elemen
vektor<- c(0.5, 0.6)                     # Numerik
vektor <- c(TRUE, FALSE)                 # Logis
vektor <- c(T, F)                        # Logis
vektor <- c("a", "b", "c")               # Karakter
vektor <- 9:29                           # Integer
vektor <- c(1+0i, 2+4i)                  # Kompleks
vektor <- vector("numeric", length = 10) # untuk inisialisasi vektor.
```

**Catatan:** Menurut [dokumentasi R](https://stat.ethz.ch/R-manual/R-devel/doc/manual/R-lang.html#Objects) untuk `typeof()` dan `class()`, pernyataan tentang "perbedaan utama/main difference" adalah tidak benar. Kelas adalah atribut dari objek yang dapat ditetapkan terlepas dari mode penyimpanan internalnya, sedangkan `typeof()` menentukan tipe (R internal) atau mode penyimpanan dari objek apa pun. Salah satu menggambarkan karakteristik logis sedangkan yang lain adalah karakteristik fisik dari suatu objek.

```{r , echo=T, results='hide'}
class(vektor)                            # Periksa kelas vektor
as.numeric(vektor)                       # Menetapkan vektor sebagai numerik
as.logical(vektor)                       # Menetapkan vektor sebagai logis
as.character(vektor)                     # Menetapkan vektor sebagai karakter
as.numeric(c(FALSE,TRUE,TRUE,FALSE))     # Menetapkan vektor logis sebagai angka 
```

Terkadang, R tidak dapat menemukan cara untuk memaksa suatu objek dan ini dapat menghasilkan NA.

```{r , echo=T, results='hide'}
vektor <- c("a", "b", "c","1")       	   # menetapkan nilai vektor
as.numeric(vektor)                       # menetapkan vektor sebagai numerik
as.logical(vektor)                       # menetapkan vektor sebagai logis
as.complex(vektor)                       # menetapkan vektor sebagai karakter
```

**Catatan:** Saat paksaan tidak masuk akal terjadi, Anda biasanya akan mendapat peringatan dari R.

Kita sudah melihat bahwa elemen dasar dari objek R adalah vektor. Vektor dapat ditetapkan dengan berbagai jenis berikut:

*	**character:** di mana setiap elemen adalah string, mis., urutan simbol alfanumerik.
*	**numeric:** di mana setiap elemen adalah [bilangan real](https://en.wikipedia.org/wiki/Real_number) dalam format floating point [presisi ganda](https://en.wikipedia.org/wiki/Double-precision_floating-point_format).
*	**integer:** di mana setiap elemen adalah [integer](https://en.wikipedia.org/wiki/Integer).
*	**logis:** di mana setiap elemen adalah TRUE, FALSE, atau NA3
*	**complex:** di mana setiap elemen adalah bilangan kompleks.

## Matriks

Matriks adalah vektor dengan atribut dimensi. Matriks dibuat berdasarkan kolom, sehingga entri dapat dianggap dimulai dari sudut "kiri atas" dan mengalir di kolom.

```{r , echo=T}
matriks <- matrix(c(1, 2, 3, 4, 5, 6), nrow = 2, ncol = 3)
matriks
```

Matriks juga dapat dibuat langsung dari vektor dengan menambahkan atribut dimensi.

```{r , echo=T, results='hide'}
matriks <- 1:6                         # Membuat vektor
dim(matriks) <- c(2, 3)                # rubah vektor sebagai matriks sebesar 2x3
matriks                                # Mencetak hasilnya
```

Matriks dapat dibuat dengan pengikatan kolom atau pengikatan baris dengan fungsi `cbind()` dan `rbind()`.

```{r , echo=T, results='hide'}
x <- 1:3                              # Membuat vektor `x`
y <- 10:12                            # Membuat vektor `y`
cbind(x, y)                           # Menggabungkan vektor `x` dan` y` dengan kolom
rbind(x, y)                           # Menggabungkan vektor `x` dan` y` dengan baris
```

## Array

Array mirip dengan matrix, tetapi dapat memiliki lebih dari dua dimensi. Masing-masing dimensi dalam array memiliki ukuran tertentu.

```{r}
array_data <- array(c(1, 2, 3, 4, 5, 6), dim = c(2, 3, 1))
```


## Faktor

Faktor-faktor digunakan untuk mewakili data kategorikal dan dapat menjadi tidak teratur atau teratur. Orang dapat menganggap faktor sebagai vektor integer di mana setiap integer memiliki label.  Menggunakan faktor dengan label lebih baik daripada menggunakan bilangan bulat karena faktor menggambarkan diri sendiri. Memiliki variabel yang memiliki nilai "Laki-laki" dan "Perempuan" lebih baik daripada variabel yang memiliki nilai 1 dan 2. Objek-objek dapat dibuat dengan fungsi `faktor()`.

```{r , echo=T, results='hide'}
x <- factor(c("yes","no","yes","no"))  # Membuat objek faktor
x                                      # Cetak hasilnya
table(x)                               # Tabel dari `x`
unclass(x)                             # Melihat representasi faktor yang mendasarinya
attr(x,"levels")                       # Melihat representasi faktor yang mendasarinya
```

## Data Frame

Kerangka data (data frame) adalah tabel atau struktur mirip array dua dimensi di mana setiap kolom berisi nilai satu variabel dan setiap baris berisi satu set nilai dari setiap kolom.

Berikut ini adalah karakteristik data frame.

*	Nama kolom tidak boleh kosong;
*	Nama baris harus unik;
*	Data yang disimpan dalam data frame bisa dari numerik, faktor atau tipe karakter;
*	Setiap kolom harus berisi jumlah item data yang sama.

```{r , echo=T, results='hide'}
# Buat data frame pertama.
df1 <- data.frame(id = c (1:5), 
                name = c("Julian","Vanessa","Jeffry","Angel","Nikki"),
              salary = c(623.3,515.2,611.0,729.0,843.25), 
          start_date = as.Date(c("2022-01-01", "2022-09-23", "2022-11-15",                                               "2022-05-11", "2022-03-27")),
                dept = c("DS","DS","BA","DA","DS"), stringsAsFactors = F)
df1
```

```{r , echo=T, results='hide'}
# Buat data frame kedua.
df2 <-data.frame(id = c (6:10), 
               name = c("Ardifo","Irene","Kefas","Sherly","Bakti"),
             salary = c(578.0,722.5,632.8,632.8,NA), 
         start_date = as.Date(c("2022-05-21","2022-07-30","2022-06-17",
                                "2022-07-30","2018-09-03")),
               dept = c("Actuaries","Actuaries","CA","DE","Lecturer"),stringsAsFactors = F)
df2
```

```{r ,echo=T, results='hide'}
df3 <- rbind(df1,df2)                  # Gabungkan dua frame data
print(df3)                             # Cetak hasilnya `df3`
head(df3)                              # Cetak enam baris pertama
head(df3,6)                            # Cetak enam baris pertama
#View(df3)                             # Menggunakan RStudio seperti penampil Excel
class(df3)                             # objeknya bertipe data.frame
str(df3)                               # Dapatkan struktur data frame
dim(df3)                               # Periksa dimensi data
```

Data frame biasanya dibuat dengan membaca dalam dataset menggunakan `read.table()` atau `read.csv ()`. Namun, data frame juga dapat dibuat secara eksplisit dengan fungsi `data.frame()` atau mereka dapat dipaksakan dari jenis objek lain seperti list.

## Lists

List dalam R adalah struktur data yang mengizinkan Anda untuk menyimpan berbagai jenis objek, termasuk vektor, matriks, array, dataframe, dan objek list lainnya, dalam satu objek tunggal. Ini memungkinkan Anda untuk membuat struktur data yang kompleks dan fleksibel dengan menggabungkan objek-objek yang berbeda ke dalam satu wadah. List sering digunakan ketika Anda perlu mengorganisir dan mengelompokkan objek-objek yang terkait.

Berikut adalah contoh penggunaan dan pembuatan list dalam R:

```{r ,echo=T, results='hide'}
# Membuat vektor dan matriks
vektor <- c(1.5, 2.7, 3.2, 4.0)
matriks <- matrix(c(1, 2, 3, 4, 5, 6), nrow = 2, ncol = 3)
```

```{r ,echo=T, results='hide'}
# Membuat dataframe
data_frame <- data.frame(name = c("Alice", "Bakti", "Charlie"),
                         age = c(25, 30, 28),
                         score = c(95, 88, 76))
```

```{r ,echo=T, results='hide'}
faktor <- "List, Sudah Jadi"
```



```{r ,echo=T, results='hide'}
# Membuat list
my_list <- list(vektor, matriks, data_frame, faktor)
```


```{r,echo=T, results='hide'}
# Menampilkan list
print(my_list)
```

Anda juga dapat memberi nama pada setiap elemen dalam list untuk membuat list yang lebih mudah dibaca:

```{r}
nama_list <- list(elemen1 = vektor, 
                  elemen2 = matriks, 
                  elemen3 = data_frame, 
                  elemen4 = faktor)

# Menampilkan elemen dalam list berdasarkan nama
print(nama_list$elemen1)
print(nama_list$elemen2)
print(nama_list$elemen3)
print(nama_list$elemen4)
```

Anda dapat mengakses elemen-elemen dalam list menggunakan indeks atau nama. Misalnya:

```{r,echo=T, results='hide'}
# Mengakses elemen pertama dalam list menggunakan indeks
elemen1 <- my_list[[1]]
elemen2 <- my_list[[2]]
elemen3 <- my_list[[2]]
elemen4 <- my_list[[2]]

# Menampilkan hasil
print(elemen1)
print(elemen2)
print(elemen3)
print(elemen4)
```

List memungkinkan Anda mengorganisir, mengelompokkan, dan mengakses objek-objek yang beragam dalam struktur data tunggal, sehingga sangat berguna dalam analisis data yang kompleks dan beragam.


## Rekayasa Data Frame 


### Tanpa Packages

Sebagai seorang Data Scientist, ketika mencoba menyimulasikan proses analisis data, pemodelan, bahkan prediksi. Anda harus mampu secara intuitif membangun dataframe untuk memperkirakan kumpulan data sampel. Terutama, ketika Anda tidak memiliki kumpulan data sampel sama sekali. Oleh karena itu, pada bagian ini, kita akan belajar sedikit mengenai cara menghasilkan dataframe. Harap perhatikan baik-baik contoh berikut:

```{r , echo=T, results='show'}
# Misalkan Anda ingin membangun kumpulan data karyawan di sebuah perusahaan

No<-(1:52)                                       # Menghasilkan bilangan 1-52
Name<-c(LETTERS,letters)                         # 26 LETTERS dan 26 letters
Gender<-sample(rep(c("Male","Female"),times=26)) # 26 Laki-laki dan 26 perempuan

# Menghasilkan tanggal lahir
year_in_3<-seq(as.Date("2000/01/01"), by="year", length.out=4)
Birthday <- rep(year_in_3, times=13)

# Menghasilkan kategori universitas
univ1<-rep("National",times=26)                  # 26 universitas negeri
univ2<-rep("Private",times=16)                   # 16 universitas swasta 
univ3<-rep("Overseas",times=10)                  # 10 universitas luar negeri
Universities<-sample(c(univ1,univ2,univ3))       # Menggabungkan data (vetor)

gpa<-runif(52,min=3.00,max=4.00)                 # Menghasilkan 52 bilangan acak (min=3, dan max=4) 
GPA<-round(gpa,digits=2)                         # Mengatur digit bilangan acak Anda
Salary<-sample(600:1200,52,replace=T)            # Menghasilakn sampel antara 600-1200 (memungkinkan nilai duplikat)
Employees<-data.frame(No,
                      Name,
                      Birthday,
                      Gender,
                      Universities,
                      GPA,
                      Salary)
Employees
```


### Mengunakan Packages

Dalam contoh kedua ini, digunakan pustaka *(Packages)* `faker` untuk menghasilkan data palsu seperti nama, alamat, dan lain-lain. Pastikan Anda telah menginstal pustaka tersebut menggunakan perintah `install.packages("fakir")` jika belum terinstal, mengikuti langkah berikut.

```{r, eval=F}
install.packages("remotes")
remotes::install_github("ThinkR-open/fakir")
```

Selanjutnya, anda dapat membuat data frame palsu seperti diperlihatkan berikut:

```{r}
library(fakir)
fake_ticket_client(vol = 10)
```

**Catatan:** Pustaka `fakir` Menyimpan beberapa dataset didalamnya, antara lain:

```{r, eval=F}
fake_products(10)                                   # Rekayasa Data Produk 
fake_visits(from = "2017-01-01", to = "2017-01-31") # Pengunjung Website
fake_sondage_answers(n = 10)                        # Kuisioner transfortasi
```

## Latihan

1.    Buatlah Rekayasa dataframe Mahasiswa dengan empat kolom: "Nama", "Usia", "Kota",  dan "Nilai". Sebanyak 100 baris, dengan syarat tidak boleh ada nama yang sama. 

2.    Buatlah Rekayasa dataframe Karyawan dengan tujuh kolom: "No", "Name", "Birthday", "Gender", "Universities", "GPA", "Salary". Sebanyak 100 baris, dengan syarat tidak boleh ada nama yang sama.

3.    Buatlah Rekayasa dataframe pengunjung Website, sebanyak 200 baris.


**Catatan:** Kumpulkan hasil latihan anda, tidak boleh sama dengan teman mahasiwa lainnya.


